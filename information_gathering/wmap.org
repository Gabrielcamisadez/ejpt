#+TITLE: ğŸ›¡ï¸ Guia de Uso: WMAP no Metasploit Framework
#+AUTHOR: Gabriel (Software Engineering & CyberSec)
#+DATE: [2026-01-28]
#+STARTUP: showeverything

* ğŸŒ IntroduÃ§Ã£o ao WMAP
O WMAP Ã© um plugin de scanner de vulnerabilidades web integrado ao *Metasploit*. Ele automatiza a execuÃ§Ã£o de diversos mÃ³dulos auxiliares para identificar falhas comuns.

** ğŸ¯ Vetores de Ataque Identificados:
- ğŸ’‰ *SQL Injection*
- âš”ï¸ *Cross-Site Scripting (XSS)*
- ğŸ“‚ *Directory Traversal*
- ğŸ“„ *File Inclusion*

---

* âš™ï¸ ConfiguraÃ§Ã£o do Ambiente
Antes de iniciar, o banco de dados *PostgreSQL* deve estar ativo.

#+begin_src bash
# ğŸ˜ Iniciar banco de dados e Metasploit
sudo msfdb init && msfconsole

# ğŸ”Œ Dentro do msfconsole, carregar o plugin
load wmap
#+end_src

---

* ğŸš€ Workflow de ExecuÃ§Ã£o

** 1. ğŸ“ Adicionar Site Alvo
O "site" define a raiz do host (IP ou DomÃ­nio).
#+begin_src bash
wmap_sites -a http://172.17.0.2  # Exemplo: Seu container PHP/Docker
wmap_sites -l                   # ğŸ“‹ Listar sites configurados
#+end_src

** 2. ğŸ¯ Definir o Target (URL)
O "target" vincula o site a um ID especÃ­fico para o scan.
#+begin_src bash
wmap_targets -d 0               # ğŸ”— Define o site de ID 0 como alvo
wmap_targets -l                 # âœ… Verifica se o alvo foi selecionado (Y)
#+end_src

** 3. ğŸ” SeleÃ§Ã£o e Teste de MÃ³dulos
Verifica quais mÃ³dulos do MSF sÃ£o compatÃ­veis com o servidor web detectado.
#+begin_src bash
wmap_run -t                     # ğŸ§ª Modo teste: lista o que serÃ¡ executado
#+end_src

** 4. âš¡ ExecuÃ§Ã£o do Scan
Inicia a varredura ativa contra o alvo.
#+begin_src bash
wmap_run -e                     # ğŸ§¨ Executa todos os mÃ³dulos selecionados
#+end_src

---

* ğŸ“Š Gerenciamento de Resultados
Os achados sÃ£o armazenados automaticamente no banco de dados do framework.

#+begin_src bash
wmap_vulns -l                   # ğŸš© Lista vulnerabilidades encontradas pelo WMAP
vulns                           # ğŸ“ Comando nativo do MSF para visÃ£o geral
#+end_src

---

* ğŸ’¡ Dicas para o LaboratÃ³rio (Doom Emacs)
- ğŸ–¥ï¸ **Terminal**: Use o =vterm= dentro do Emacs para uma experiÃªncia de terminal mais fluida com o MSF.
- ğŸ”— **Burp Suite**: Se estiver interceptando o trÃ¡fego no Burp, configure o proxy global no MSF:
  #+begin_src bash
  setg Proxies HTTP:127.0.0.1:8080
  #+end_src
- âš¡ **Babel**: VocÃª pode executar os comandos acima diretamente com ~C-c C-c~ se o seu ~ob-shell~ estiver configurado.

---

* ğŸ“œ Tabela de ReferÃªncia RÃ¡pida
| Ãcone | Comando             | DescriÃ§Ã£o                                  |
|-------+---------------------+--------------------------------------------|
| â•    | wmap_sites -a [URL] | Adiciona novo site                         |
| ğŸ¯    | wmap_targets -d ID  | Define o alvo pelo ID                       |
| ğŸ§ª    | wmap_run -t         | Lista mÃ³dulos compatÃ­veis                  |
| ğŸš€    | wmap_run -e         | Inicia o scan completo                     |
| ğŸš©    | wmap_vulns -l       | Exibe vulnerabilidades                     |
| ğŸ§¹    | wmap_targets -c     | Limpa a lista de alvos                     |

#+NOTES: Lembre-se de desligar as instÃ¢ncias EC2 apÃ³s o lab para evitar custos com o IPv4 pÃºblico! ğŸ’¸

