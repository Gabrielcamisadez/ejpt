#+title: From Audit To Pentest

* ğŸ› ï¸ From Audit to Pentest: The Workflow
Como analista, vocÃª utiliza as polÃ­ticas e os achados da auditoria para direcionar seus testes. Se a polÃ­tica diz que algo "deve ser feito", o Pentest verifica se "realmente foi feito" e se Ã© resistente a ataques.

** Policy as a Baseline
   - A polÃ­tica de seguranÃ§a define o estado desejado (*Desired State*).
   - O auditor verifica a existÃªncia da polÃ­tica e evidÃªncias de conformidade documental.
   - O Pentester tenta contornar os controles tÃ©cnicos que implementam essa polÃ­tica.

* ğŸ§ Security Policy Example: Linux Servers
Esta polÃ­tica simplificada estÃ¡ alinhada ao framework **NIST SP 800-53**.

| Policy Area | Control ID | Policy Statement |
|-------------+------------+------------------|
| *Access Control (AC)* | AC-2, AC-5 | *User Accounts:* Apenas pessoal autorizado terÃ¡ acesso aos servidores Linux. Cada usuÃ¡rio deve ter uma conta Ãºnica; contas compartilhadas sÃ£o proibidas. Contas inativas devem ser desativadas ou removidas em atÃ© 30 dias. |
| | IA-2, IA-5 | *Authentication:* Impor polÃ­ticas de senhas fortes (mÃ­nimo 12 caracteres, incluindo maiÃºsculas, minÃºsculas, nÃºmeros e caracteres especiais). Usar autenticaÃ§Ã£o baseada em chaves SSH sempre que possÃ­vel; desativar acesso SSH por senha. Implementar 2FA para contas privilegiadas. |
| *Audit and Accountability (AU)* | AU-2, AU-3 | *System Logging:* Habilitar e configurar logs do sistema para capturar eventos crÃ­ticos. Usar =rsyslog= ou =journald= para centralizaÃ§Ã£o de logs. |
| | AU-6, AU-7 | *Log Review:* Revisar logs regularmente em busca de atividades suspeitas. Reter logs por pelo menos 90 dias. |

* ğŸš€ Translating Policy into Pentest Actions
Com base na polÃ­tica de servidores Linux acima, estas seriam suas aÃ§Ãµes durante a fase de execuÃ§Ã£o:

** ğŸ”‘ Testing Access Control (AC)
- *AÃ§Ã£o:* Tentar identificar contas de usuÃ¡rios antigos ou compartilhadas (ex: =admin=, =suporte=).
- *VerificaÃ§Ã£o:* Checar permissÃµes excessivas via =sudo -l= ou arquivos com permissÃ£o de escrita indevida para o grupo =others=.

** ğŸ” Testing Authentication (IA)
- *AÃ§Ã£o:* Realizar ataques de forÃ§a bruta ou *Password Spraying* para validar a polÃ­tica de complexidade de senha.
- *VerificaÃ§Ã£o:* Tentar login via SSH usando senha para confirmar se a autenticaÃ§Ã£o por senha foi realmente desativada em favor de chaves pÃºblicas.

** ğŸ“ Testing Audit and Accountability (AU)
- *AÃ§Ã£o:* Tentar realizar aÃ§Ãµes crÃ­ticas (como alterar o arquivo =/etc/shadow=) e verificar se o incidente foi gerado no log.
- *VerificaÃ§Ã£o:* Checar se o atacante consegue apagar os prÃ³prios rastros (limpar o =history= ou arquivos de log) ou se os logs estÃ£o sendo enviados corretamente para um servidor centralizado.
  
* ğŸ Final Conclusion
O sucesso de um Pentest profissional nÃ£o Ã© apenas conseguir o "shell", mas sim provar onde os controles de GRC falharam. Ao usar uma **Security Policy** como guia, vocÃª entrega um relatÃ³rio que ajuda a empresa a se adequar a padrÃµes internacionais como o NIST.
